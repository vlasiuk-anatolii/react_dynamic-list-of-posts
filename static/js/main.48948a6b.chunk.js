(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(6),s=n.n(c),a=n(4),r=n(2),o=(n(11),n(12),n(3)),i=n(1),u=n.n(i),l=(n(14),"https://mate.academy/students-api/");function p(t){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts?userId=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var h=n(0),O=function(t){var e=t.userSelectedId,n=t.selectPostId,c=t.postId,s=t.setIsLoading,i=Object(r.useState)([]),l=Object(a.a)(i,2),d=l[0],j=l[1],b=function(){var t=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:e=t.sent,j(e),s(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(o.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:n=t.sent,j(n),s(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){m()}),[e]),Object(r.useEffect)((function(){b()}),[]),Object(h.jsx)("div",{className:"PostsList",children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Posts:"}),Object(h.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:d.map((function(t){return Object(h.jsxs)("li",{className:"PostsList__item",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("b",{children:["[User"," ",t.userId,"]:"," "]}),t.body]}),Object(h.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){t&&c===t.id?n(void 0):n(t.id),s(!0)},children:t&&c===t.id?"Close":"Open"})]},t.id)}))})]})})},x=(n(16),"https://mate.academy/students-api/");function v(t){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/comments?postId=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/comments/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t,e,n,c){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(u.a.mark((function t(e,n,c,s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:s,name:e,email:n,body:c})});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=function(t){var e=t.commentsList,n=t.setCommentsList,c=Object(r.useState)(""),s=Object(a.a)(c,2),i=s[0],l=s[1],p=Object(r.useState)(""),d=Object(a.a)(p,2),j=d[0],b=d[1],f=Object(r.useState)(""),m=Object(a.a)(f,2),O=m[0],x=m[1],y=Object(r.useState)(!1),_=Object(a.a)(y,2),w=_[0],k=_[1],I=function(){var t=Object(o.a)(u.a.mark((function t(c){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return N(c.name,c.email,c.body,c.postId),t.next=4,v(c.postId);case 4:s=t.sent,n(s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){if(t.preventDefault(),i&&j&&O&&e){var n={id:e.length+1,postId:e[0].postId,name:i,email:j,body:O};I(n),k(!1),l(""),b(""),x("")}else k(!0)},children:[Object(h.jsx)("div",{className:"form-field",children:Object(h.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Your name",value:i,className:"NewCommentForm__input",onChange:function(t){l(t.target.value)}})}),Object(h.jsx)("div",{className:"form-field",children:Object(h.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Your email",className:"NewCommentForm__input",value:j,onChange:function(t){b(t.target.value)}})}),Object(h.jsx)("div",{className:"form-field",children:Object(h.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",required:!0,value:O,onChange:function(t){x(t.target.value)}})}),w&&Object(h.jsx)("div",{style:{color:"red"},children:"Add correct data"}),Object(h.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},g=(n(17),function(t){var e=t.postId,n=t.setIsLoading,c=Object(r.useState)([]),s=Object(a.a)(c,2),i=s[0],l=s[1],p=Object(r.useState)(!1),d=Object(a.a)(p,2),b=d[0],f=d[1],m=Object(r.useState)(),O=Object(a.a)(m,2),x=O[0],y=O[1],w=function(){var t=Object(o.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,j(e);case 3:c=t.sent,y(c),n(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){n(!0),w()}),[]);var N=function(){var t=Object(o.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,v(e);case 3:c=t.sent,l(c),n(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=4;break}return t.next=3,_(e);case 3:N();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n(!0),N()}),[e]),Object(h.jsxs)("div",{className:"PostDetails",children:[Object(h.jsx)("h2",{children:"Post details:"}),e&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("section",{className:"PostDetails__post",children:Object(h.jsx)("p",{children:null===x||void 0===x?void 0:x.title})}),Object(h.jsxs)("section",{className:"PostDetails__comments",children:[Object(h.jsx)("button",{type:"button",className:"button",onClick:function(){f(!b)},children:i&&(b?"Show ".concat(i.length," comments"):"Hide ".concat(i.length," comments"))}),Object(h.jsxs)("ul",{className:b?"PostDetails__visiblelist":"PostDetails__list",children:[i&&i.map((function(t){return Object(h.jsxs)("li",{className:"PostDetails__list-item",children:[Object(h.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){k(t.id)},children:"X"}),Object(h.jsx)("p",{children:t.body})]},t.id)})),n(!1)]})]}),Object(h.jsx)("section",{children:Object(h.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(h.jsx)(I,{commentsList:i,setCommentsList:l})})})]})]})}),S=(n(18),function(){return Object(h.jsx)("div",{className:"Loader",children:Object(h.jsx)("div",{className:"Loader__content"})})}),C="https://mate.academy/students-api/";function P(){return(P=Object(o.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(C,"/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var L=function(){var t=Object(r.useState)([]),e=Object(a.a)(t,2),n=e[0],c=e[1],s=Object(r.useState)("0"),o=Object(a.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(),p=Object(a.a)(l,2),d=p[0],j=p[1],b=Object(r.useState)(!1),f=Object(a.a)(b,2),m=f[0],x=f[1];return Object(r.useEffect)((function(){(function(){return P.apply(this,arguments)})().then((function(t){return c(t)}))}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{className:"App__header",children:Object(h.jsxs)("label",{children:["Select a user: \xa0",Object(h.jsxs)("select",{className:"App__user-selector",value:i,onChange:function(t){u(t.target.value),x(!0)},children:[Object(h.jsx)("option",{value:"0",disabled:!0,children:"All users"}),n.map((function(t){return Object(h.jsx)("option",{value:"".concat(t.id),children:t.name},t.id)}))]})]})}),Object(h.jsxs)("main",{className:"App__main",children:[Object(h.jsxs)("div",{className:"App__sidebar",children:[m&&Object(h.jsx)(S,{}),Object(h.jsx)(O,{userSelectedId:i,selectPostId:j,postId:d,setIsLoading:x})]}),Object(h.jsx)("div",{className:"App__content",children:"0"!==i?Object(h.jsx)(g,{postId:d,setIsLoading:x}):Object(h.jsx)("p",{children:"Choose user!"})})]})]})};s.a.render(Object(h.jsx)(L,{}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.48948a6b.chunk.js.map